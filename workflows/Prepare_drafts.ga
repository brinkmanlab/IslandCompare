{"uuid": "bdcf6d1a-0472-4589-bf42-d631bb215e69", "tags": [], "format-version": "0.1", "name": "Prepare drafts", "version": 32, "steps": {"0": {"tool_id": null, "tool_version": null, "outputs": [], "workflow_outputs": [{"output_name": "output", "uuid": "16ed8a65-165e-4d6e-905e-b833f934d011", "label": null}], "input_connections": {}, "tool_state": "{\"collection_type\": \"list\"}", "id": 0, "uuid": "b7497d84-fcfb-489c-a58e-4eada67f78f6", "errors": null, "name": "Input dataset collection", "label": "Draft data", "inputs": [], "position": {"top": 464.8333282470703, "left": 237}, "annotation": "input collection ids must be:\ndata: input draft datasets\nreference: optional reference to use to order draft contigs", "content_id": null, "type": "data_collection_input"}, "1": {"tool_id": null, "tool_version": null, "outputs": [], "workflow_outputs": [{"output_name": "output", "uuid": "65bab154-f0af-4f98-8e42-e1570e9d6561", "label": null}], "input_connections": {}, "tool_state": "{\"optional\": true, \"parameter_type\": \"text\"}", "id": 1, "uuid": "4dc0d67e-5f63-4ead-a243-005017d60981", "errors": null, "name": "Input parameter", "label": "Reference dbkey", "inputs": [], "position": {"top": 326.1666717529297, "left": 1535.1666717529297}, "annotation": "", "content_id": null, "type": "parameter_input"}, "2": {"tool_id": "biopython-convert", "tool_version": "1.0", "outputs": [{"type": "gff3", "name": "info_output"}, {"type": "txt", "name": "output"}], "workflow_outputs": [], "input_connections": {"input": {"output_name": "output", "id": 0}}, "tool_state": "{\"info\": \"\\\"true\\\"\", \"__page__\": null, \"__rerun_remap_job_id__\": null, \"split\": \"\\\"false\\\"\", \"query\": \"\\\"[?!(features[?type==`source`].qualifiers.plasmid)]\\\"\", \"input\": \"{\\\"__class__\\\": \\\"ConnectedValue\\\"}\", \"output_type\": \"\\\"genbank\\\"\", \"bioperl\": \"\\\"false\\\"\"}", "id": 2, "uuid": "abe4c875-5258-4933-9cc0-f9216691aa12", "errors": null, "name": "BioPython SeqIO Converter", "post_job_actions": {"HideDatasetActioninfo_output": {"output_name": "info_output", "action_type": "HideDatasetAction", "action_arguments": {}}, "HideDatasetActionoutput": {"output_name": "output", "action_type": "HideDatasetAction", "action_arguments": {}}}, "label": "To Genbank", "inputs": [], "position": {"top": 469, "left": 560.1666870117188}, "annotation": "", "content_id": "biopython-convert", "type": "tool"}, "3": {"tool_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_awk_tool/1.1.1", "tool_version": "1.1.1", "outputs": [{"type": "input", "name": "outfile"}], "workflow_outputs": [], "input_connections": {"envs_0|val": {"output_name": "output", "id": 1}}, "tool_state": "{\"__page__\": null, \"code\": \"\\\"# If the reference is set, print all input ids\\\\nBEGIN { if (ENVIRON[\\\\\\\"reference\\\\\\\"] == \\\\\\\"\\\\\\\") exit 0; }\\\\n{ print tool_input_id; nextfile }\\\"\", \"last\": \"\\\"false\\\"\", \"infiles\": \"[{\\\"__index__\\\": 0, \\\"infile\\\": {\\\"__class__\\\": \\\"RuntimeValue\\\"}}]\", \"envs\": \"[{\\\"__index__\\\": 0, \\\"name\\\": \\\"reference\\\", \\\"val\\\": {\\\"__class__\\\": \\\"ConnectedValue\\\"}}]\", \"__rerun_remap_job_id__\": null, \"infile\": \"{\\\"__class__\\\": \\\"RuntimeValue\\\"}\"}", "id": 3, "tool_shed_repository": {"owner": "bgruening", "changeset_revision": "a6f147a050a2", "name": "text_processing", "tool_shed": "toolshed.g2.bx.psu.edu"}, "uuid": "236acda8-5d89-4ba2-bc05-5e619793c055", "errors": null, "name": "Text reformatting", "post_job_actions": {"HideDatasetActionoutfile": {"output_name": "outfile", "action_type": "HideDatasetAction", "action_arguments": {}}}, "label": "Optional Ref Logic", "inputs": [{"name": "infile", "description": "runtime parameter for tool Text reformatting"}], "position": {"top": 395.1666717529297, "left": 1848.1666870117188}, "annotation": "If ref not specified, don't stitch.", "content_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_awk_tool/1.1.1", "type": "tool"}, "4": {"tool_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_awk_tool/1.1.1", "tool_version": "1.1.1", "outputs": [{"type": "input", "name": "outfile"}], "workflow_outputs": [], "input_connections": {"infiles_0|infile": {"output_name": "info_output", "id": 2}}, "tool_state": "{\"__page__\": null, \"code\": \"\\\"# Count number of contigs and output ids of drafts\\\\nBEGIN { i=0; }\\\\n/^[^#]/ { ++i; }\\\\ni > 1 { print tool_input_id; i=0; nextfile }\\\"\", \"last\": \"\\\"false\\\"\", \"infiles\": \"[{\\\"__index__\\\": 0, \\\"infile\\\": {\\\"__class__\\\": \\\"ConnectedValue\\\"}}]\", \"envs\": \"[]\", \"__rerun_remap_job_id__\": null, \"infile\": \"{\\\"__class__\\\": \\\"RuntimeValue\\\"}\"}", "id": 4, "tool_shed_repository": {"owner": "bgruening", "changeset_revision": "a6f147a050a2", "name": "text_processing", "tool_shed": "toolshed.g2.bx.psu.edu"}, "uuid": "69d69961-ece0-40f7-9c42-2c93a18099e5", "errors": null, "name": "Text reformatting", "post_job_actions": {"HideDatasetActionoutfile": {"output_name": "outfile", "action_type": "HideDatasetAction", "action_arguments": {}}}, "label": "Find drafts", "inputs": [{"name": "infile", "description": "runtime parameter for tool Text reformatting"}], "position": {"top": 685.1666870117188, "left": 1015.1666870117188}, "annotation": "", "content_id": "toolshed.g2.bx.psu.edu/repos/bgruening/text_processing/tp_awk_tool/1.1.1", "type": "tool"}, "5": {"tool_id": "__FILTER_FROM_FILE__", "tool_version": "1.0.0", "outputs": [{"type": "input", "name": "output_filtered"}, {"type": "input", "name": "output_discarded"}], "workflow_outputs": [], "input_connections": {"input": {"output_name": "output", "id": 2}, "how|filter_source": {"output_name": "outfile", "id": 4}}, "tool_state": "{\"__page__\": null, \"how\": \"{\\\"__current_case__\\\": 1, \\\"filter_source\\\": {\\\"__class__\\\": \\\"ConnectedValue\\\"}, \\\"how_filter\\\": \\\"remove_if_present\\\"}\", \"__rerun_remap_job_id__\": null, \"input\": \"{\\\"__class__\\\": \\\"ConnectedValue\\\"}\"}", "id": 5, "uuid": "02152b31-3aef-4d4e-86d8-40c645be314d", "errors": null, "name": "Filter List", "post_job_actions": {"HideDatasetActionoutput_discarded": {"output_name": "output_discarded", "action_type": "HideDatasetAction", "action_arguments": {}}, "HideDatasetActionoutput_filtered": {"output_name": "output_filtered", "action_type": "HideDatasetAction", "action_arguments": {}}}, "label": "Separate datasets that need stitching", "inputs": [], "position": {"top": 463.1666717529297, "left": 1426.1666717529297}, "annotation": "", "content_id": "__FILTER_FROM_FILE__", "type": "tool"}, "6": {"tool_id": "__FILTER_FROM_FILE__", "tool_version": "1.0.0", "outputs": [{"type": "input", "name": "output_filtered"}, {"type": "input", "name": "output_discarded"}], "workflow_outputs": [], "input_connections": {"how|filter_source": {"output_name": "outfile", "id": 3}, "input": {"output_name": "output_filtered", "id": 5}}, "tool_state": "{\"__page__\": null, \"how\": \"{\\\"__current_case__\\\": 0, \\\"filter_source\\\": {\\\"__class__\\\": \\\"ConnectedValue\\\"}, \\\"how_filter\\\": \\\"remove_if_absent\\\"}\", \"__rerun_remap_job_id__\": null, \"input\": \"{\\\"__class__\\\": \\\"ConnectedValue\\\"}\"}", "id": 6, "uuid": "62ac89d6-62d2-4feb-85cc-21600803026e", "errors": null, "name": "Filter List", "post_job_actions": {"HideDatasetActionoutput_discarded": {"output_name": "output_discarded", "action_type": "HideDatasetAction", "action_arguments": {}}, "HideDatasetActionoutput_filtered": {"output_name": "output_filtered", "action_type": "HideDatasetAction", "action_arguments": {}}}, "label": "Redirect Datasets", "inputs": [], "position": {"top": 561.1666870117188, "left": 2167.1666870117188}, "annotation": "Direct datasets based on logic of previous step", "content_id": "__FILTER_FROM_FILE__", "type": "tool"}, "7": {"tool_id": "mauve-contig-mover", "tool_version": "1.0", "outputs": [{"type": "fasta", "name": "reordered"}, {"type": "tabular", "name": "backbone"}, {"type": "tabular", "name": "contigs"}, {"type": "tabular", "name": "features"}], "workflow_outputs": [], "input_connections": {"ref_select|key": {"output_name": "output", "id": 1}, "draft": {"output_name": "output_filtered", "id": 6}}, "tool_state": "{\"ref_select\": \"{\\\"__current_case__\\\": 3, \\\"key\\\": {\\\"__class__\\\": \\\"ConnectedValue\\\"}, \\\"ref_source\\\": \\\"key\\\"}\", \"__page__\": null, \"__rerun_remap_job_id__\": null, \"draft\": \"{\\\"__class__\\\": \\\"ConnectedValue\\\"}\"}", "id": 7, "uuid": "381837c6-fb83-44bb-bf0c-4e5c43b31073", "errors": null, "name": "Mauve Contig Mover", "post_job_actions": {"HideDatasetActionbackbone": {"output_name": "backbone", "action_type": "HideDatasetAction", "action_arguments": {}}, "HideDatasetActionreordered": {"output_name": "reordered", "action_type": "HideDatasetAction", "action_arguments": {}}, "HideDatasetActioncontigs": {"output_name": "contigs", "action_type": "HideDatasetAction", "action_arguments": {}}, "HideDatasetActionfeatures": {"output_name": "features", "action_type": "HideDatasetAction", "action_arguments": {}}}, "label": null, "inputs": [], "position": {"top": 296.1666717529297, "left": 2476.1666259765625}, "annotation": "", "content_id": "mauve-contig-mover", "type": "tool"}, "8": {"tool_id": "mauve_contig_mover_stitch", "tool_version": "1.0", "outputs": [{"type": "input", "name": "output"}], "workflow_outputs": [], "input_connections": {"contigs": {"output_name": "contigs", "id": 7}, "draft": {"output_name": "output_filtered", "id": 6}}, "tool_state": "{\"contigs\": \"{\\\"__class__\\\": \\\"ConnectedValue\\\"}\", \"pad_len\": \"\\\"1000\\\"\", \"__rerun_remap_job_id__\": null, \"draft\": \"{\\\"__class__\\\": \\\"ConnectedValue\\\"}\", \"__page__\": null}", "id": 8, "uuid": "49912265-13f9-4fd0-86b4-24c5178bc547", "errors": null, "name": "Mauve Contig Mover - Stitch", "post_job_actions": {"HideDatasetActionoutput": {"output_name": "output", "action_type": "HideDatasetAction", "action_arguments": {}}}, "label": null, "inputs": [], "position": {"top": 647.1666870117188, "left": 2836.1666259765625}, "annotation": "", "content_id": "mauve_contig_mover_stitch", "type": "tool"}, "9": {"tool_id": "__MERGE_COLLECTION__", "tool_version": "1.0.0", "outputs": [{"type": "input", "name": "output"}], "workflow_outputs": [{"output_name": "output", "uuid": "41eea0e9-4dc7-427f-96dd-60295fbab022", "label": "Single Contig Data"}], "input_connections": {"inputs_2|input": {"output_name": "output_discarded", "id": 5}, "inputs_0|input": {"output_name": "output", "id": 8}, "inputs_1|input": {"output_name": "output_discarded", "id": 6}}, "tool_state": "{\"inputs\": \"[{\\\"__index__\\\": 0, \\\"input\\\": {\\\"__class__\\\": \\\"ConnectedValue\\\"}}, {\\\"__index__\\\": 1, \\\"input\\\": {\\\"__class__\\\": \\\"ConnectedValue\\\"}}, {\\\"__index__\\\": 2, \\\"input\\\": {\\\"__class__\\\": \\\"ConnectedValue\\\"}}]\", \"__rerun_remap_job_id__\": null, \"advanced\": \"{\\\"conflict\\\": {\\\"__current_case__\\\": 1, \\\"duplicate_options\\\": \\\"suffix_conflict_rest\\\", \\\"suffix_pattern\\\": \\\"_#\\\"}}\", \"__page__\": null}", "id": 9, "uuid": "0a1cb2bd-3368-4104-8aaf-45d5184d4521", "errors": null, "name": "Merge Collections", "post_job_actions": {}, "label": null, "inputs": [], "position": {"top": 1007.1666870117188, "left": 3235.1666259765625}, "annotation": "", "content_id": "__MERGE_COLLECTION__", "type": "tool"}}, "annotation": "", "a_galaxy_workflow": "true"}